victoriaLineData = ({
  "stations": {
    "Brixton": {
      "name": "Brixton",
      "label": "Brixton"
    },
    "BlackhorseRoad": {
      "name": "BlackhorseRoad",
      "label": "Blackhorse\nRoad"
    },
    "FinsburyPark": {
      "name": "FinsburyPark",
      "label": "Finsbury\nPark"
    },
    "GreenPark": {
      "name": "GreenPark",
      "label": "Green Park"
    },
    "HighburyIslington": {
      "name": "HighburyIslington",
      "label": "Highbury &\nIslington"
    },
    "KingsCrossStPancras": {
      "name": "KingsCrossStPancras",
      "label": "King's Cross\nSt. Pancras"
    },
    "OxfordCircus": {
      "name": "OxfordCircus",
      "label": "Oxford\nCircus"
    },
    "Pimlico": {
      "name": "Pimlico",
      "label": "Pimlico"
    },
    "SevenSisters": {
      "name": "SevenSisters",
      "label": "Seven\nSisters"
    },
    "Stockwell": {
      "name": "Stockwell",
      "label": "Stockwell"
    },
    "TottenhamHale": {
      "name": "TottenhamHale",
      "label": "Tottenham\nHale"
    },
    "Vauxhall": {
      "name": "Vauxhall",
      "label": "Vauxhall"
    },
    "Victoria": {
      "name": "Victoria",
      "label": "Victoria"
    },
    "WalthamstowCentral": {
      "name": "WalthamstowCentral",
      "label": "Walthamstow\nCentral"
    },
    "WarrenStreet": {
      "name": "WarrenStreet",
      "label": "Warren\nStreet"
    },
    "SouthKensington": {
      "name": "SouthKensington",
      "label": "South\nKensington"
    },
    "SloaneSquare": {
      "name": "SloaneSquare",
      "label": "Sloane\nSquare"
    },
    "StJamessPark": {
      "name": "StJamessPark",
      "label": "St. James's\nPark"
    },
    "Westminster": {
      "name": "Westminster",
      "label": "Westminster"
    },
    "Embankment": {
      "name": "Embankment",
      "label": "Embankment"
    },
    "Temple": {
      "name": "Temple",
      "label": "Temple"
    },
    "Blackfriars": {
      "name": "Blackfriars",
      "label": "Blackfriars"
    },
    "MansionHouse": {
      "name": "MansionHouse",
      "label": "Mansion House"
    },
    "CannonStreet": {
      "name": "CannonStreet",
      "label": "Cannon Street"
    },
    "Monument": {
      "name": "Monument",
      "label": "Monument"
    },
    "TowerHill": {
      "name": "TowerHill",
      "label": "Tower\nHill"
    },
    "Aldgate": {
      "name": "Aldgate",
      "label": "Aldgate"
    },
    "LiverpoolStreet": {
      "name": "LiverpoolStreet",
      "label": "Liverpool\nStreet"
    },
    "Moorgate": {
      "name": "Moorgate",
      "label": "Moorgate"
    },
    "BondStreet": {
      "name": "BondStreet",
      "label": "Bond\nStreet"
    },
    "Waterloo": {
      "name": "Waterloo",
      "label": "Waterloo"
    },
    "Barbican": {
      "name": "Barbican",
      "label": "Barbican"
    },
    "Farringdon": {
      "name": "Farringdon",
      "label": "Farringdon"
    },
    "EustonSquare": {
      "name": "EustonSquare",
      "label": "Euston\nSquare"
    },
    "GreatPortlandStreet": {
      "name": "GreatPortlandStreet",
      "label": "Great Portland\nStreet"
    },
    "EdgewareRoad": {
      "name": "EdgewareRoad",
      "label": "Edgeware\nRoad"
    },
    "LadbrokeGrove": {
      "name": "LadbrokeGrove",
      "label": "Ladbroke Grove"
    }
  },
  "lines": [
    {
      "name": "Victoria",
      "label": "Victoria",
      "color": "#2B8DBF",
      "shiftCoords": [0, 0],
      "nodes": [
        {
          "coords": [0, -25],
          "name": "Brixton",
          "labelPos": "SW"
        },
        {
          "coords": [-4, -21],
          "name": "Stockwell",
          "marker": "interchange",
          "labelPos": "E"
        },
        {
          "coords": [-8, -17],
          "name": "Vauxhall",
          "marker": "interchange",
          "labelPos": "NE"
        },
        {
          "coords": [-9, -15]
        },
        {
          "coords": [-9, -8],
          "name": "Pimlico",
          "labelPos": "W"
        },
        {
          "coords": [-9, 1],
          "name": "Victoria",
          "marker": "interchange",
          "canonical": true,
          "labelPos": "NW"
        },
        {
          "coords": [-9, 15],
          "name": "GreenPark",
          "marker": "interchange",
          "labelPos": "NE"
        },
        {
          "coords": [-9, 16]
        },
        {
          "coords": [-8, 18]
        },
        {
          "coords": [-6, 20]
        },
        {
          "coords": [-4, 22],
          "name": "OxfordCircus",
          "marker": "interchange",
          "labelPos": "NW"
        },
        {
          "coords": [9, 35],
          "name": "WarrenStreet",
          "marker": "interchange",
          "labelPos": "E"
        },
        {
          "coords": [13, 39]
        },
        {
          "coords": [15, 40]
        },
        {
          "coords": [18, 40],
          "name": "KingsCrossStPancras",
          "marker": "interchange",
          "labelPos": "N"
        },
        {
          "coords": [25, 40]
        },
        {
          "coords": [26, 41]
        },
        {
          "coords": [26, 50],
          "name": "HighburyIslington",
          "marker": "interchange",
          "labelPos": "NE"
        },
        {
          "coords": [26, 53]
        },
        {
          "coords": [27, 55]
        },
        {
          "coords": [31, 59],
          "name": "FinsburyPark",
          "marker": "interchange",
          "labelPos": "SE"
        },
        {
          "coords": [35, 63]
        },
        {
          "coords": [37, 64]
        },
        {
          "coords": [41, 64],
          "name": "SevenSisters",
          "marker": "interchange",
          "labelPos": "N"
        },
        {
          "coords": [45, 64],
          "name": "TottenhamHale",
          "marker": "interchange",
          "labelPos": "S"
        },
        {
          "coords": [49, 64],
          "name": "BlackhorseRoad",
          "marker": "interchange",
          "labelPos": "N"
        },
        {
          "coords": [55, 64],
          "name": "WalthamstowCentral",
          "marker": "interchange",
          "labelPos": "E"
        }
      ]
    },
    {
      "name": "Circle",
      "label": "Circle",
      "color": "#FFD600",
      "shiftCoords": [0, 0],
      "nodes": [
        {
          "coords": [-25, 1],
          "name": "SouthKensington",
          "marker": "interchange",
          "labelPos": "S"
        },
        {
          "coords": [-17, 1],
          "name": "SloaneSquare",
          "labelPos": "S"
        },
        {
          "coords": [-9, 1],
          "name": "Victoria",
          "marker": "interchange",
          "labelPos": "NW"
        },
        {
          "coords": [-3, 1],
          "name": "StJamessPark",
          "labelPos": "S"
        },
        {
          "coords": [5, 1],
          "name": "Westminster",
          "marker": "interchange",
          "canonical": true,
          "labelPos": "NW"
        },
        {
          "coords": [11, 1],
          "name": "Embankment",
          "marker": "interchange",
          "labelPos": "SE"
        },
        {
          "coords": [17, 1],
          "name": "Temple",
          "canonical": true,
          "labelPos": "N"
        },
        {
          "coords": [23, 1]
        },
        {
          "coords": [25, 2]
        },
        {
          "coords": [28, 5],
          "name": "Blackfriars",
          "canonical": true,
          "labelPos": "NW"
        },
        {
          "coords": [32, 9],
          "name": "MansionHouse",
          "canonical": true,
          "labelPos": "NW"
        },
        {
          "coords": [36, 13],
          "name": "CannonStreet",
          "marker": "interchange",
          "canonical": true,
          "labelPos": "NW"
        },
        {
          "coords": [38, 15]
        },
        {
          "coords": [40, 16]
        },
        {
          "coords": [45, 16],
          "name": "Monument",
          "marker": "interchange",
          "labelPos": "S"
        },
        {
          "coords": [53, 16],
          "name": "TowerHill",
          "marker": "interchange",
          "labelPos": "S"
        },
        {
          "coords": [55, 16]
        },
        {
          "coords": [56, 17]
        },
        {
          "coords": [56, 20],
          "name": "Aldgate",
          "labelPos": "W"
        },
        {
          "coords": [56, 26]
        },
        {
          "coords": [55, 27]
        },
        {
          "coords": [50, 27],
          "name": "LiverpoolStreet",
          "marker": "interchange",
          "canonical": true,
          "labelPos": "N"
        },
        {
          "coords": [44, 27],
          "name": "Moorgate",
          "marker": "interchange",
          "labelPos": "SE"
        },
        {
          "coords": [43, 27]
        },
        {
          "coords": [41, 28]
        },
        {
          "coords": [38, 31],
          "name": "Barbican",
          "labelPos": "SW"
        },
        {
          "coords": [33, 36],
          "name": "Farringdon",
          "labelPos": "SW"
        },
        {
          "coords": [31, 38]
        },
        {
          "coords": [29, 39]
        },
        {
          "coords": [4, 39],
          "name": "EustonSquare",
          "labelPos": "S"
        },
        {
          "coords": [-6, 39],
          "name": "GreatPortlandStreet",
          "labelPos": "S"
        },
        {
          "coords": [-20, 39],
          "name": "EdgewareRoad",
          "labelPos": "S"
        },
        {
          "coords": [-30, 39]
        },
        {
          "coords": [-32, 38]
        },
        {
          "coords": [-38, 32]
        },
        {
          "coords": [-39, 30]
        },
        {
          "coords": [-39, 26],
          "name": "LadbrokeGrove",
          "labelPos": "E"
        }
      ]
    },
    {
      "name": "District",
      "label": "District",
      "color": "#0C6826",
      "shiftCoords": [0, 0],
      "shiftNormal": 1,
      "nodes": [
        {
          "coords": [-25, 1],
          "name": "SouthKensington",
          "marker": "interchange",
          "canonical": true,
          "labelPos": "S"
        },
        {
          "coords": [-17, 1],
          "name": "SloaneSquare",
          "canonical": true,
          "labelPos": "S"
        },
        {
          "coords": [-9, 1],
          "name": "Victoria",
          "marker": "interchange",
          "labelPos": "NW"
        },
        {
          "coords": [-3, 1],
          "name": "StJamessPark",
          "canonical": true,
          "labelPos": "S"
        },
        {
          "coords": [5, 1],
          "name": "Westminster",
          "marker": "interchange",
          "labelPos": "NW"
        },
        {
          "coords": [11, 1],
          "name": "Embankment",
          "marker": "interchange",
          "canonical": true,
          "labelPos": "SE"
        },
        {
          "coords": [17, 1],
          "name": "Temple",
          "labelPos": "N"
        },
        {
          "coords": [23, 1]
        },
        {
          "coords": [25, 2]
        },
        {
          "coords": [28, 5],
          "name": "Blackfriars",
          "labelPos": "NW"
        },
        {
          "coords": [32, 9],
          "name": "MansionHouse",
          "labelPos": "NW"
        },
        {
          "coords": [36, 13],
          "name": "CannonStreet",
          "marker": "interchange",
          "labelPos": "NW"
        },
        {
          "coords": [38, 15]
        },
        {
          "coords": [40, 16]
        },
        {
          "coords": [45, 16],
          "name": "Monument",
          "marker": "interchange",
          "canonical": true,
          "labelPos": "S"
        },
        {
          "coords": [53, 16],
          "name": "TowerHill",
          "marker": "interchange",
          "canonical": true,
          "labelPos": "S"
        }
      ]
    },
    {
      "name": "Metropolitan",
      "label": "Metropolitan",
      "color": "#89014C",
      "shiftCoords": [0, 0],
      "shiftNormal": -1,
      "nodes": [
        {
          "coords": [56, 20],
          "name": "Aldgate",
          "canonical": true,
          "labelPos": "W"
        },
        {
          "coords": [56, 26]
        },
        {
          "coords": [55, 27]
        },
        {
          "coords": [50, 27],
          "name": "LiverpoolStreet",
          "marker": "interchange",
          "labelPos": "N"
        },
        {
          "coords": [44, 27],
          "name": "Moorgate",
          "marker": "interchange",
          "canonical": true,
          "labelPos": "SE"
        },
        {
          "coords": [43, 27]
        },
        {
          "coords": [41, 28]
        },
        {
          "coords": [38, 31],
          "name": "Barbican",
          "canonical": true,
          "labelPos": "SW"
        },
        {
          "coords": [33, 36],
          "name": "Farringdon",
          "canonical": true,
          "labelPos": "SW"
        },
        {
          "coords": [31, 38]
        },
        {
          "coords": [29, 39]
        },
        {
          "coords": [4, 39],
          "name": "EustonSquare",
          "canonical": true,
          "labelPos": "S"
        },
        {
          "coords": [-6, 39],
          "name": "GreatPortlandStreet",
          "canonical": true,
          "labelPos": "S"
        },
        {
          "coords": [-8, 40]
        },
        {
          "coords": [-38, 70]
        }
      ]
    },
    {
      "name": "Jubilee",
      "label": "Jubilee",
      "color": "#85898A",
      "shiftCoords": [0, 0],
      "nodes": [
        {
          "coords": [-35, 76]
        },
        {
          "coords": [-13, 54]
        },
        {
          "coords": [-12, 52]
        },
        {
          "coords": [-12, 22],
          "name": "BondStreet",
          "marker": "interchange",
          "labelPos": "NW"
        },
        {
          "coords": [-12, 19]
        },
        {
          "coords": [-11, 17]
        },
        {
          "coords": [-9, 15],
          "name": "GreenPark",
          "marker": "interchange",
          "labelPos": "NE"
        },
        {
          "coords": [5, 1],
          "name": "Westminster",
          "marker": "interchange",
          "labelPos": "SW"
        },
        {
          "coords": [9, -3]
        },
        {
          "coords": [10, -5]
        },
        {
          "coords": [10, -9],
          "name": "Waterloo",
          "marker": "interchange",
          "labelPos": "W"
        }
      ]
    }
  ]
})



function chart()  {
  
  const container = d3.select('#viz');
  const width = 1600;
  const height = 1000;

  const map = d3.tubeMap()
    .width(width)
    .height(height)
    .margin({
      top: 20,
      right: 20,
      bottom: 40,
      left: 100,
    })
    .on("click", function (name) {
      console.log(name);
    });
  
  container
    .datum(victoriaLineData).call(map);

  const svg = container.select('svg');
  
  function zoomed() {
    svg.select('g').attr('transform', d3.event.transform.toString());
  }

  const zoom = d3
    .zoom()
    .scaleExtent([0.5, 6])
    .on('zoom', zoomed);

  const zoomContainer = svg.call(zoom);
  const initialScale = 2;
  const initialTranslate = [100, 200];


  return div;
}




chart();